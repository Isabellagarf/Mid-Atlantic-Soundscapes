labs(title="OL 2000: Diel fluctuations during September 2024 at ES03", x="Hour (UTC)", y = "dB")
plot2000.med
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = size), size = 1) +
geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray40", "ES03" = "gray60"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES03", x="Hour (UTC)", y = "dB")
plot2000.med
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = site), size = 1) +
geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray40", "ES03" = "gray60"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES03", x="Hour (UTC)", y = "dB")
plot2000.med
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = site), size = 1) +
#geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray40", "ES03" = "gray60"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES03", x="Hour (UTC)", y = "dB")
plot2000.med
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = site), size = 1) +
#geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray50", "ES03" = "gray80"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES03", x="Hour (UTC)", y = "dB")
plot2000.med
ggsave(here("figs/OL_plots", "line2000ol.sepES.all.png"), plot2000.med, width= 7, height= 4, units= "in")
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = site), size = 1) +
#geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray50", "ES03" = "gray80"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES sites", x="Hour (UTC)", y = "dB")
plot2000.med
ggsave(here("figs/OL_plots", "line2000ol.sepES.all.png"), plot2000.med, width= 7, height= 4, units= "in")
location <- matrix(c(-74.83, 37.68), nrow = 1)
date_Time <- as.POSIXct("2023-09-16", tz = "UTC")
Sunrise <- sunriset(crds = location, dateTime = date_Time, direction = "sunrise", POSIXct.out = TRUE)
sunrise_dechour <- Sunrise %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
Sunset <- sunriset(crds = location, dateTime = date_Time, direction = "sunset", POSIXct.out = TRUE)
sunset_dechour <- Sunset %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
civil_dawn <- crepuscule(crds = location, dateTime = date_Time, solarDep = 6, direction = "dawn", POSIXct.out = TRUE)
civil_dawn_dechour <- civil_dawn %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
nautical_dawn <- crepuscule(crds = location, dateTime = date_Time, solarDep = 12, direction = "dawn", POSIXct.out = TRUE)
nautical_dawn_dechour <- nautical_dawn %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
astronomical_dawn <- crepuscule(crds = location, dateTime = date_Time, solarDep = 18, direction = "dawn", POSIXct.out = TRUE)
astronomical_dawn_dechour <- astronomical_dawn %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
civil_dusk <- crepuscule(crds = location, dateTime = date_Time, solarDep = 6, direction = "dusk", POSIXct.out = TRUE)
civil_dusk_dechour <- civil_dusk %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
nautical_dusk <- crepuscule(crds = location, dateTime = date_Time, solarDep = 12, direction = "dusk", POSIXct.out = TRUE)
nautical_dusk_dechour <- nautical_dusk %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
astronomical_dusk <- crepuscule(crds = location, dateTime = date_Time, solarDep = 18, direction = "dusk", POSIXct.out = TRUE)
astronomical_dusk_dechour <- astronomical_dusk %>%
mutate(hour = hour(time)) %>%
mutate(min = minute(time)) %>%
mutate(sec = second(time)) %>%
mutate(decimal_hour = hour + (min/60) + (sec/3600))
nrsData.oct <- createOctaveLevel(nrsData4, type='ol')
# df 1 -------- #
nrsData.oct2 <- createOctaveLevel(nrsData2, type='ol')
nrsData.oct.mhd2 <- nrsData.oct2 %>%
mutate(hour = substr(format(UTC,"%Y:%m:%d %H:%M:%S"), 12, 13)) %>% #lubridate doesn't recognize hour 00, so this is extracting the characters themselves
mutate(hour = as.numeric(hour)) %>%
filter(month(UTC) == 9) %>% #adjust month
mutate(day = day(UTC)) %>%
select(UTC, OL_2000, day, hour) #adjust freq extracted
nrsData.medoct2 <- nrsData.oct.mhd2 %>%
group_by(hour) %>%
na.omit(OL_2000) %>%
summarise(
ES01 = median(OL_2000), #change freq if desired
q1_ol2 = quantile(OL_2000, 0.1), #0.1 quantile SPL
q9_ol2 = quantile(OL_2000, 0.9)  #0.9 quantile SPL
) %>%
arrange(hour)
# df 2 -------- #
nrsData.oct3 <- createOctaveLevel(nrsData3, type='ol')
nrsData.oct.mhd3 <- nrsData.oct3 %>%
mutate(hour = substr(format(UTC,"%Y:%m:%d %H:%M:%S"), 12, 13)) %>% #lubridate doesn't recognize hour 00, so this is extracting the characters themselves
mutate(hour = as.numeric(hour)) %>%
filter(month(UTC) == 9) %>% #adjust month
mutate(day = day(UTC)) %>%
select(UTC, OL_2000, day, hour) #adjust freq extracted
nrsData.medoct3 <- nrsData.oct.mhd3 %>%
group_by(hour) %>%
na.omit(OL_2000) %>%
summarise(
ES02 = median(OL_2000), #change freq if desired
q1_ol3 = quantile(OL_2000, 0.1), #0.1 quantile SPL
q9_ol3 = quantile(OL_2000, 0.9)  #0.9 quantile SPL
) %>%
arrange(hour)
# df 3 -------- #
nrsData.oct4 <- createOctaveLevel(nrsData4, type='ol')
nrsData.oct.mhd4 <- nrsData.oct4 %>%
mutate(hour = substr(format(UTC,"%Y:%m:%d %H:%M:%S"), 12, 13)) %>% #lubridate doesn't recognize hour 00, so this is extracting the characters themselves
mutate(hour = as.numeric(hour)) %>%
filter(month(UTC) == 9) %>% #adjust month
mutate(day = day(UTC)) %>%
select(UTC, OL_2000, day, hour) #adjust freq extracted
nrsData.medoct4 <- nrsData.oct.mhd4 %>%
group_by(hour) %>%
na.omit(OL_2000) %>%
summarise(
ES03 = median(OL_2000), #change freq if desired
q1_ol4 = quantile(OL_2000, 0.1), #0.1 quantile SPL
q9_ol4 = quantile(OL_2000, 0.9)  #0.9 quantile SPL
) %>%
arrange(hour)
nrsData.medoct <- nrsData.medoct2 %>%
full_join(nrsData.medoct3) %>%
full_join(nrsData.medoct4)
nrsData.medoct_long <- nrsData.medoct %>%
pivot_longer(cols = c(ES01, ES02, ES03),
names_to = "site",
values_to = "avg_ol")
# --- sunset colors? line plot #
plot2000.med <- ggplot(nrsData.medoct_long, aes(x = hour, y = avg_ol, group = site)) +
geom_line(aes(color = site), size = 1) +
#geom_point() +
scale_x_continuous(limits = c(0, 24), breaks = seq(0, 22, by = 2)) +
scale_color_manual(values = c("ES01" = "gray20", "ES02" = "gray50", "ES03" = "gray80"))+
#geom_ribbon(aes(x = hour, ymin = q1_ol, ymax = q9_ol), alpha = 0.2, fill = "gray") +
geom_vline(xintercept = civil_dusk_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dusk_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dusk_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = civil_dawn_dechour$decimal_hour, color = "#F76218", linetype = "solid",size =  1, alpha = .5) +
geom_vline(xintercept = nautical_dawn_dechour$decimal_hour, color = "#B10065", linetype = "solid",size =  .7, alpha = .5) +
geom_vline(xintercept = astronomical_dawn_dechour$decimal_hour, color = "#740580", linetype = "solid",size =  .4, alpha = .5) +
geom_vline(xintercept = sunrise_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size =  2, alpha = .5) +
geom_vline(xintercept = sunset_dechour$decimal_hour, color = "#F2C447", linetype = "solid", size = 2, alpha = .5) +
theme_bw() +
labs(title="OL 2000: Diel fluctuations during September 2024 at ES sites", x="Hour (UTC)", y = "dB")
plot2000.med
ggsave(here("figs/OL_plots", "line2000ol.sepES.all.png"), plot2000.med, width= 7, height= 4, units= "in")
# Created by Bella Garfield, 7/9/25
library(ggplot2)
library(ggalt)
library(readxl)
# Read in spreadsheet with deployment dates
Deployment_data <- read.csv("data/Deployment_metadata_mid-Atl.csv")
library(PAMscapes)
library(ggplot2)
library(tidyverse)
library(lubridate)
library(here)
library(dplyr)
library(car)
library(patchwork)
library(ggpubr)
library(rstatix)
library(PAMmisc)
library(dunn.test)
library(smplot2)
library(tsibble)
library(scales)
library(ggpmisc)
library(paletteer)
library(ggh4x)
library(suntools)
library(zoo)
library(wesanderson)
library(openair)
library(reshape2)
library(fishualize)
library(gghighlight)
library(ggrepel)
library(multcompView)
SE<- function(x)sd(x)/sqrt(length(x))
DB01_202207_minOL <- read.csv(here("data/DB01_202207_minOL.csv"))
View(DB01_202207_minOL)
DB01_202207_minOL$UTC <- as.POSIXct(DB01_202207_minOL$UTC, format= "%Y-%m-%dT%H:%M:%SZ", tz = "GMT")
DB01_202207_minOL$PLATFORM = "DB01"
runSoundscapeExplorer(DB01_202207_minOL)
DB01_minlocation <- matrix(c(-74.82, 38.71), nrow = 1)
DB01_mindate_Time <- seq(ymd_hms("2022-06-10 00:00:00"), ymd_hms("2024-11-08 16:00:00"), by = "1 min")
DB01_minSunset <- sunriset(crds = DB01_minlocation, dateTime = DB01_mindate_Time, direction = "sunset", POSIXct.out = TRUE)
DB01sunset_mindatehour <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))
View(DB01sunset_mindatehour)
DB01sunset_mindatehour <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
View(DB01_minSunset)
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
View(DB01sunset_datehourmin)
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(3)]
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_fixed <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, DB01sunset_datehourmin$sunset_UTC_minute, sep = " ")
DB01sunset_datehourmin$UTC_fixed <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC_fixed <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC_fixed = as.POSIXct(DB01sunset_datehourmin$UTC_fixed, format = "%Y-%m-%d %H:%M")
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_minsunset <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
DB01_minSunset <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
View(DB01_minSunset)
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01_minSunset <- sunriset(crds = DB01_minlocation, dateTime = DB01_mindate_Time, direction = "sunset", POSIXct.out = TRUE)
View(DB01_minSunset)
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
View(DB01_minSunsetTimes)
View(DB01_minSunset)
View(DB01sunset_datehourmin)
View(DB01_202207_minOL)
DB01_minSunsetTimes <- DB01_202207_minOL %>%
full_join(DB01sunset_datehourmin, join_by(UTC))
View(DB01_minSunsetTimes)
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
View(DB01_minSunsetTimes)
class(DB01_202207_minOL$UTC)
class(DB01sunset_mindatehour)
class(DB01sunset_datehourmin$UTC)
DB01_202207_minOL <- read.csv(here("data/DB01_202207_minOL.csv"))
View(DB01_202207_minOL)
DB01_202207_minOL$UTC <- as.POSIXct(DB01_202207_minOL$UTC, format= "%Y-%m-%dT%H:%M:%SZ", tz = "GMT")
DB01_202207_minOL$PLATFORM = "DB01"
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
View(DB01_minSunsetTimes)
DB01_minlocation <- matrix(c(-74.82, 38.71), nrow = 1)
DB01_mindate_Time <- seq(ymd_hms("2022-07-07 00:00:00"), ymd_hms("2022-12-16 17:44:00"), by = "1 min")
DB01_minSunset <- sunriset(crds = DB01_minlocation, dateTime = DB01_mindate_Time, direction = "sunset", POSIXct.out = TRUE)
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT-4")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT+4")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT+4")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT-8")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "GMT")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "EST")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "EST-1")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M", tz = "EST")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_202207_minOL$UTC <- as.POSIXct(DB01_202207_minOL$UTC, format= "%Y-%m-%dT%H:%M:%SZ")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
DB01_202207_minOL <- read.csv(here("data/DB01_202207_minOL.csv"))
DB01_202207_minOL$UTC <- as.POSIXct(DB01_202207_minOL$UTC, format= "%Y-%m-%dT%H:%M:%SZ")
DB01_202207_minOL$PLATFORM = "DB01"
DB01sunset_datehourmin <- DB01_minSunset %>%
mutate(UTC_date = date(time))%>%
mutate(sunset_UTC_hour = hour(time))%>%
mutate(sunset_UTC_minute = minute(time))
DB01sunset_datehourmin <- DB01sunset_datehourmin %>%
group_by(UTC_date, sunset_UTC_hour, sunset_UTC_minute)%>%
summarize(n = n())
DB01sunset_datehourmin$sunset_UTC_hour <- as.character(DB01sunset_datehourmin$sunset_UTC_hour)
DB01sunset_datehourmin$sunset_UTC_minute <- as.character(DB01sunset_datehourmin$sunset_UTC_minute)
DB01sunset_datehourmin$UTC_date <- as.character(DB01sunset_datehourmin$UTC_date)
DB01sunset_datehourmin <- DB01sunset_datehourmin[-c(4)]
DB01sunset_datehourmin$UTC_1 <- paste(DB01sunset_datehourmin$UTC_date, DB01sunset_datehourmin$sunset_UTC_hour, sep = " ")
DB01sunset_datehourmin$UTC <- paste(DB01sunset_datehourmin$UTC_1,DB01sunset_datehourmin$sunset_UTC_minute , sep = ":")
DB01sunset_datehourmin$UTC = as.POSIXct(DB01sunset_datehourmin$UTC, format = "%Y-%m-%d %H:%M")
DB01_minSunsetTimes <- DB01_202207_minOL %>%
right_join(DB01sunset_datehourmin, join_by(UTC))
DB01_min500Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_500))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 500Hz Octave Level SPL (db re 1 \u00b5Pa)')))
DB01_min2000Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_2000))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 2000Hz Octave Level SPL (db re 1 \u00b5Pa)')))
DB01_min1000Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_1000))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 1000Hz Octave Level SPL (db re 1 \u00b5Pa)')))
DB01_min500Hz/DB01_min1000Hz/DB01_min2000Hz +plot_layout(guides = "collect", axis_titles = "collect")
DB01_min500Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_500))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 500Hz Octave Level SPL (db re 1 \u00b5Pa)')))+
geom_hline(yintercept = 100, col= "black")
DB01_min1000Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_1000))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 1000Hz Octave Level SPL (db re 1 \u00b5Pa)')))+
geom_hline(yintercept = 100, col= "black")
DB01_min2000Hz <- ggplot(DB01_minSunsetTimes, aes(x= UTC, y= OL_2000))+
geom_line(linewidth = 0.75)+
scale_x_datetime(date_breaks = "3 months", date_labels= "%b %Y", minor_breaks = NULL)+
theme_bw()+
xlab("Date")+
ylab(expression(paste('Median 2000Hz Octave Level SPL (db re 1 \u00b5Pa)')))+
geom_hline(yintercept = 100, col= "black")
DB01_min500Hz/DB01_min1000Hz/DB01_min2000Hz +plot_layout(guides = "collect", axis_titles = "collect")
